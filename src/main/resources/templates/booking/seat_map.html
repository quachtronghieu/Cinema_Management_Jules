<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Seat - The Last Guardian - CGV Cinema</title>
    <meta name="description"
          content="Select your seats for The Last Guardian at CGV Cinema. Choose from available seats with premium VIP options.">
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap"
          rel="stylesheet"/>

    <link rel="stylesheet" th:href="@{/assets/css/style.css}">
    <link rel="stylesheet" th:href="@{/assets/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/assets/css/seat_template.css}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet"/>
</head>

<style>
    .seat--booked {
        background-color: #aaa !important;
        cursor: not-allowed;
        pointer-events: none;
        opacity: 0.6;
    }
</style>

<body>


<!-- Main Content -->
<main role="main">


    <!-- Seat Selection -->
    <section class="section pt-0">

        <div class="container">
            <input type="radio" id="tpl1" name="tpl" th:checked="${template == 'TM000001'}" hidden="">
            <input type="radio" id="tpl2" name="tpl" th:checked="${template == 'TM000002'}" hidden="">
            <input type="radio" id="tpl3" name="tpl" th:checked="${template == 'TM000003'}" hidden="">
            <input type="radio" id="tpl4" name="tpl" th:checked="${template == 'TM000004'}" hidden="">

            <div class="seat-map">
                <a class="btn btn-light btn-compact" href="/rooms"> <i class="fa fa-arrow-left me-1 "></i>
                    Back
                </a>
                <!-- Screen -->
                <div class="seat-map__screen">SCREEN</div>


                <div class="templates">

                    <!-- TEMPLATE 1: existing layout -->
                    <div id="template-1" class="template-section"
                         th:if="${template == 'TM000001'}">

                        <div th:each="entry : ${groupSeat}">
                            <!-- Seat Map Grid -->
                            <!--Seat Map Grid Layout 1-->
                            <div class="seat-map__grid .Row">
                                <!-- Row A -->
                                <div class="row">
                                    <div th:each="seats : ${entry.getValue()}" class="seat seat"
                                         th:classappend=" 'seat--' + ${seats.getSeatType()}"
                                         th:text="${seats.getRowLabel()} + ${seats.getSeatNumber()}"
                                         th:attr="data-seat=${seats.getRowLabel() + seats.getSeatNumber()}">A1
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>


                    <div id="template-2" class="template-section" th:if="${template == 'TM000002'}">

                        <div class="seat-map__grid seat-map__grid--t2">
                            <!-- Rows A-F with two aisles at columns 5 and 9 -->
                            <div class="row" th:each="entry : ${groupSeat}">
                                <div th:each="seats, iterStat : ${entry.value}">
                                    <div class="seat"
                                         th:classappend="' seat--' + ${seats.getSeatType()} +
                                    (${seatStatusMap[seats.id]} == 'unavailable' ? ' seat--booked' : '')"
                                         th:attr="data-seat=${seats.getRowLabel() + seats.getSeatNumber()},
                              data-status=${seatStatusMap[seats.id]}"
                                         th:text="${seats.getRowLabel()} + ${seats.getSeatNumber()}">
                                    </div>

                                    <div class="aisle" th:if="${iterStat.index == 3 or iterStat.index == 6}"></div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- TEMPLATE 3: front VIP rows + compact rear grid -->
                    <div id="template-3" class="template-section" th:if="${template == 'TM000003'}">
                        <div th:each="entry : ${groupSeat}">

                            <div class="seat-map__grid seat-map__grid--t3">
                                <div th:if>
                                    <div th:each="seats : ${entry.getValue()}" class="seat seat"
                                         th:classappend=" 'seat--' + ${seats.getSeatType()}"
                                         th:text="${seats.getRowLabel()} + ${seats.getSeatNumber()}"
                                         th:attr="data-seat=${seats.getRowLabel() + seats.getSeatNumber()}">A1
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- TEMPLATE 4: 8 columns, single aisle in the middle (2 blocks) -->
                    <div id="template-4" class="template-section" th:if="${template == 'TM000004'}">
                        <div class="seat-map__grid seat-map__grid--t4">
                            <div class="row" th:each="entry : ${groupSeat}">

                                <div th:each="seats, iterStat : ${entry.value}">
                                    <div class="seat" th:classappend=" 'seat--' + ${seats.getSeatType()}"
                                         th:text="${seats.getRowLabel()} + ${seats.getSeatNumber()}"
                                         th:attr="data-seat=${seats.getRowLabel() + seats.getSeatNumber()}">A1
                                    </div>
                                    <div class="aisle" th:if="${iterStat.index == 3}">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>


                    <!-- Legend -->
                    <div class="seat-map__legend">
                        <div class="legend-item">
                            <div class="legend-item__color legend-item__color--available"></div>
                            <span>Standard</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-item__color legend-item__color--vip"></div>
                            <span>VIP</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

</body>

<script>
    document.querySelectorAll('.seat--booked').forEach(seat => {
        seat.title = "This seat is already booked";
    });
</script>

</html>